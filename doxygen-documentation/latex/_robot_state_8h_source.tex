\hypertarget{_robot_state_8h_source}{}\doxysection{Robot\+State.\+h}
\label{_robot_state_8h_source}\index{src/libs/loco/include/loco/robot/RobotState.h@{src/libs/loco/include/loco/robot/RobotState.h}}
\mbox{\hyperlink{_robot_state_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{math_utils_8h}{crl-\/basic/utils/mathUtils.h}}>}}
\DoxyCodeLine{00004\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{utils_8h}{crl-\/basic/utils/utils.h}}>}}
\DoxyCodeLine{00005\ }
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_r_b_utils_8h}{loco/robot/RBUtils.h}}"{}}}
\DoxyCodeLine{00007\ }
\DoxyCodeLine{00008\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespacecrl_1_1loco}{crl::loco}}\ \{}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{comment}{/*\ forward\ declaration\ */}}
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }Robot;}
\DoxyCodeLine{00012\ }
\DoxyCodeLine{00013\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcrl_1_1loco_1_1_joint_state}{JointState}}\ \{}
\DoxyCodeLine{00014\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00015\ \ \ \ \ \mbox{\hyperlink{namespacecrl_a6e0054d6b8b0879cd0d7f2c0c63122ce}{Quaternion}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_joint_state_ac5d447dd92ee1ec4940e3478be40dce0}{qRel}}\ =\ Quaternion::Identity();}
\DoxyCodeLine{00016\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_joint_state_abc8e65d888bc4117c8104a354b98c0b0}{angVelRel}}\ =\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}(0,\ 0,\ 0);}
\DoxyCodeLine{00017\ \};}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state}{RobotState}}\ \{}
\DoxyCodeLine{00020\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00021\ \ \ \ \ \mbox{\hyperlink{namespacecrl_a6e0054d6b8b0879cd0d7f2c0c63122ce}{Quaternion}}\ rootQ\ =\ Quaternion::Identity();}
\DoxyCodeLine{00022\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1_p3_d}{P3D}}\ rootPos\ =\ \mbox{\hyperlink{classcrl_1_1_p3_d}{P3D}}(0,\ 0,\ 0);}
\DoxyCodeLine{00023\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ rootVel\ =\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}(0,\ 0,\ 0);}
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ rootAngVel\ =\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}(0,\ 0,\ 0);}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{comment}{//\ to\ compute\ headings,\ we\ need\ to\ know\ which\ axis\ defines\ it\ (the\ yaw)}}
\DoxyCodeLine{00027\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ headingAxis\ =\ \mbox{\hyperlink{classcrl_1_1loco_1_1_r_b_globals_a5be1f31d51f0599f2bb381fba0830e03}{RBGlobals::worldUp}};}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00029\ \ \ \ \ std::vector<JointState>\ joints;}
\DoxyCodeLine{00030\ }
\DoxyCodeLine{00031\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00032\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_aee2fb8eb7e20a7223f2569066402c2cb}{\string~RobotState}}()\ \{\}}
\DoxyCodeLine{00033\ }
\DoxyCodeLine{00034\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state}{RobotState}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state}{RobotState}}\ \&other);}
\DoxyCodeLine{00035\ }
\DoxyCodeLine{00036\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state}{RobotState}}(\textcolor{keywordtype}{int}\ jCount\ =\ 0,\ \textcolor{keywordtype}{int}\ aJCount\ =\ 0);}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00038\ \ \ \ \ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state}{RobotState}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot}{Robot}}\ \&robot,\ \textcolor{keywordtype}{bool}\ useDefaultAngles\ =\ \textcolor{keyword}{false});}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_aa32145bccf10c5cd66a578f150da879a}{setJointCount}}(\textcolor{keywordtype}{int}\ jCount)\ \{}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ joints.resize(jCount);}
\DoxyCodeLine{00042\ \ \ \ \ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a2a5252f2a8f251ebd304af573531e1cb}{setHeadingAxis}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \&v)\ \{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ headingAxis\ =\ v;}
\DoxyCodeLine{00046\ \ \ \ \ \}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a35ba1f40e5c0c55cd3d0f76548cedbab}{getHeadingAxis}}()\ \{}
\DoxyCodeLine{00049\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ headingAxis;}
\DoxyCodeLine{00050\ \ \ \ \ \}}
\DoxyCodeLine{00051\ }
\DoxyCodeLine{00052\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_ae98a3022c84374d86bc0aba995c00ad0}{getJointCount}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00053\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})joints.size();}
\DoxyCodeLine{00054\ \ \ \ \ \}}
\DoxyCodeLine{00055\ }
\DoxyCodeLine{00056\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classcrl_1_1_p3_d}{P3D}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a9d49de7e2a46016b8b2cdbb7d76c5a69}{getPosition}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rootPos;}
\DoxyCodeLine{00058\ \ \ \ \ \}}
\DoxyCodeLine{00059\ }
\DoxyCodeLine{00060\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a34e6e5d4c3876c30d1dcb821a2aa7f6e}{setPosition}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1_p3_d}{P3D}}\ \&p)\ \{}
\DoxyCodeLine{00061\ \ \ \ \ \ \ \ \ rootPos\ =\ p;}
\DoxyCodeLine{00062\ \ \ \ \ \}}
\DoxyCodeLine{00063\ }
\DoxyCodeLine{00064\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacecrl_a6e0054d6b8b0879cd0d7f2c0c63122ce}{Quaternion}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a44fb945e2502e766a7bd26656e1d5c64}{getOrientation}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rootQ;}
\DoxyCodeLine{00066\ \ \ \ \ \}}
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_ac7bebc1e038055ff8e40f9778aff703b}{setOrientation}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacecrl_a6e0054d6b8b0879cd0d7f2c0c63122ce}{Quaternion}}\ \&q)\ \{}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ rootQ\ =\ q;}
\DoxyCodeLine{00070\ \ \ \ \ \}}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00072\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_aa18fac9dd9d790d671f298f7bfd79ac0}{getVelocity}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rootVel;}
\DoxyCodeLine{00074\ \ \ \ \ \}}
\DoxyCodeLine{00075\ }
\DoxyCodeLine{00076\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_af8bd19f1cd1b827ca82444183c3a6e4d}{setVelocity}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \&v)\ \{}
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ rootVel\ =\ v;}
\DoxyCodeLine{00078\ \ \ \ \ \}}
\DoxyCodeLine{00079\ }
\DoxyCodeLine{00080\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a11ca1a1a72abf0b836c0ce93f2bc8605}{getAngularVelocity}}()\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ rootAngVel;}
\DoxyCodeLine{00082\ \ \ \ \ \}}
\DoxyCodeLine{00083\ }
\DoxyCodeLine{00084\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_ac88b99301cf30086841ce1357d36ba68}{setAngularVelocity}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \&v)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ rootAngVel\ =\ v;}
\DoxyCodeLine{00086\ \ \ \ \ \}}
\DoxyCodeLine{00087\ }
\DoxyCodeLine{00088\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{namespacecrl_a6e0054d6b8b0879cd0d7f2c0c63122ce}{Quaternion}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_afbc9a12fec1b5d58bf2eeea8e8826f2f}{getJointRelativeOrientation}}(\textcolor{keywordtype}{int}\ jIndex)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{math_defs_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})jIndex\ <\ joints.size())}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ joints[jIndex].qRel;}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ exit(0);}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Quaternion::Identity();}
\DoxyCodeLine{00093\ \ \ \ \ \}}
\DoxyCodeLine{00094\ }
\DoxyCodeLine{00095\ \ \ \ \ \textcolor{keyword}{inline}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a4584feb344d467a48f3e9463f93d6d04}{getJointRelativeAngVelocity}}(\textcolor{keywordtype}{int}\ jIndex)\textcolor{keyword}{\ const\ }\{}
\DoxyCodeLine{00096\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{math_defs_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})jIndex\ <\ joints.size())}
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ joints[jIndex].angVelRel;}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ exit(0);}}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}(0,\ 0,\ 0);}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_aef2cefcdf1ed0efc5aa423465e85057c}{setJointRelativeOrientation}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{namespacecrl_a6e0054d6b8b0879cd0d7f2c0c63122ce}{Quaternion}}\ \&q,\ \textcolor{keywordtype}{int}\ jIndex)\ \{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{math_defs_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})jIndex\ <\ joints.size())}
\DoxyCodeLine{00104\ \ \ \ \ \ \ \ \ \ \ \ \ joints[jIndex].qRel\ =\ q;}
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ else}}
\DoxyCodeLine{00106\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ exit(0);}}
\DoxyCodeLine{00107\ \ \ \ \ \}}
\DoxyCodeLine{00108\ }
\DoxyCodeLine{00109\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_af41fa6f4ef8ccecf5467b13a9ebba859}{setJointRelativeAngVelocity}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1_v3_d}{V3D}}\ \&w,\ \textcolor{keywordtype}{int}\ jIndex)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ ((\mbox{\hyperlink{math_defs_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}})jIndex\ <\ joints.size())}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ joints[jIndex].angVelRel\ =\ w;}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ else}}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ \ \ \ \ \ exit(0);}}
\DoxyCodeLine{00114\ \ \ \ \ \}}
\DoxyCodeLine{00115\ }
\DoxyCodeLine{00116\ \ \ \ \ \textcolor{keyword}{inline}\ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a9f1d02abe73f229ccb3dbba2a1913b57}{getHeading}}()\ \{}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ first\ we\ need\ to\ get\ the\ current\ heading\ of\ the\ robot.}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{namespacecrl_a5db0b1362dd412558a35ba80d255997e}{getRotationAngle}}(\mbox{\hyperlink{namespacecrl_1_1loco_a3b91c69106ee1597c71a64fc9263c72d}{computeHeading}}(\mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a44fb945e2502e766a7bd26656e1d5c64}{getOrientation}}(),\ headingAxis),\ headingAxis);}
\DoxyCodeLine{00119\ \ \ \ \ \}}
\DoxyCodeLine{00120\ }
\DoxyCodeLine{00121\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a59afc53d9970dad6a84b4671533885bd}{operator==}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state}{RobotState}}\ \&other)\ \textcolor{keyword}{const};}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a6bbd83492edc4d50fa19dab13b87cd35}{writeToFile}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *fName);}
\DoxyCodeLine{00124\ }
\DoxyCodeLine{00125\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_abeb3feb2c6be6854ccbaa71b3e3a148d}{readFromFile}}(\textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *fName);}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00127\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classcrl_1_1loco_1_1_robot_state_a3d6f34389af2068fcc8bfeecc95bf1be}{setHeading}}(\textcolor{keywordtype}{double}\ heading);}
\DoxyCodeLine{00128\ \};}
\DoxyCodeLine{00129\ }
\DoxyCodeLine{00130\ \}\ \ \textcolor{comment}{//\ namespace\ crl::loco}}

\end{DoxyCode}
