\hypertarget{app_8h_source}{}\doxysection{app.\+h}
\label{app_8h_source}\index{src/apps/locoApp/app.h@{src/apps/locoApp/app.h}}
\mbox{\hyperlink{app_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ <\mbox{\hyperlink{application_8h}{crl-\/basic/gui/application.h}}>}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_kinematic_tracking_controller_8h}{loco/controller/KinematicTrackingController.h}}"{}}}
\DoxyCodeLine{00006\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_gait_planner_8h}{loco/planner/GaitPlanner.h}}"{}}}
\DoxyCodeLine{00007\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_simple_locomotion_trajectory_planner_8h}{loco/planner/SimpleLocomotionTrajectoryPlanner.h}}"{}}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{menu_8h}{menu.h}}"{}}}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ \textcolor{keyword}{namespace\ }\mbox{\hyperlink{namespaceloco_app}{locoApp}}\ \{}
\DoxyCodeLine{00011\ }
\DoxyCodeLine{00012\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classloco_app_1_1_app}{App}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application}{crl::gui::ShadowApplication}}\ \{}
\DoxyCodeLine{00013\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00014\ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_a3b60f1c5d781f5499ab77fd1a88d7156}{App}}()\ :\ \mbox{\hyperlink{namespacecrl}{crl}}::gui::\mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_ae69be13cb8e5fdec4b7fb69b8e838d77}{ShadowApplication}}(\textcolor{stringliteral}{"{}Locomotion\ App"{}})\ \{}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classcrl_1_1gui_1_1_application_a7936273bd78a210222e3111aa13b93cc}{showConsole}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classcrl_1_1gui_1_1_application_ad8aaae6f8912e84cd7b5d87932ab56b2}{automanageConsole}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classcrl_1_1gui_1_1_application_ac432e7dd644bedbc8b739c1866dfdb3a}{showPlots}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ this-\/>\mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_af0c1b0acb8c53517dc3f7c2201b3dfea}{show\_world\_frame}}\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ setup}}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ setupRobotAndController();}
\DoxyCodeLine{00022\ \ \ \ \ \}}
\DoxyCodeLine{00023\ }
\DoxyCodeLine{00024\ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac3c5f9acf7c456c8fcd7894d18a70a43}{\string~App}}()\ \textcolor{keyword}{override}\ =\ \textcolor{keywordflow}{default};}
\DoxyCodeLine{00025\ }
\DoxyCodeLine{00026\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_acaef1e67485408090a45419a58bd43c4}{process}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ gait\ plan}}
\DoxyCodeLine{00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}-\/>planner-\/>appendPeriodicGaitIfNeeded(\mbox{\hyperlink{classloco_app_1_1_app_a99ea5546181d653f20e9d03d93ee0e11}{gaitPlanner\_}}-\/>getPeriodicGait(\mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}));}
\DoxyCodeLine{00029\ }
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{double}\ simTime\ =\ 0;}
\DoxyCodeLine{00031\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (simTime\ <\ 1.0\ /\ \mbox{\hyperlink{classcrl_1_1gui_1_1_application_a40b88c077dd2ff355ed4b63bdfc5876a}{targetFramerate}})\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ \ \ \ \ simTime\ +=\ \mbox{\hyperlink{classloco_app_1_1_app_af8ac06039b98b1c2f2d555f5d5592b6d}{dt}};}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}-\/>computeAndApplyControlSignals(\mbox{\hyperlink{classloco_app_1_1_app_af8ac06039b98b1c2f2d555f5d5592b6d}{dt}});}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}-\/>advanceInTime(\mbox{\hyperlink{classloco_app_1_1_app_af8ac06039b98b1c2f2d555f5d5592b6d}{dt}});}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00036\ }
\DoxyCodeLine{00037\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ generate\ motion\ plan}}
\DoxyCodeLine{00038\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}-\/>generateMotionTrajectories();}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00040\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ adjust\ light\ and\ camera}}
\DoxyCodeLine{00041\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&center\ =\ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>getTrunk()-\/>getWorldCoordinates(\mbox{\hyperlink{classcrl_1_1_p3_d}{crl::P3D}}());}
\DoxyCodeLine{00042\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classloco_app_1_1_app_a62b3d6c844211ac98fd8e5e8660d5d6c}{followRobotWithCamera}})\ \{}
\DoxyCodeLine{00043\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_a3d5e316872dad21811713ebbdc5ad0fe}{camera}}.\mbox{\hyperlink{classcrl_1_1gui_1_1_tracking_camera_a917d253ef49fe7898f6d3e865cf86893}{target}}.x\ =\ (float)center.x;}
\DoxyCodeLine{00044\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_a3d5e316872dad21811713ebbdc5ad0fe}{camera}}.\mbox{\hyperlink{classcrl_1_1gui_1_1_tracking_camera_a917d253ef49fe7898f6d3e865cf86893}{target}}.z\ =\ (\textcolor{keywordtype}{float})center.z;}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_a762bcbc90d12dc1e2ee99eef39e87a1f}{light}}.\mbox{\hyperlink{classcrl_1_1gui_1_1_light_a493234ee537a7d72ca7f7af618a97050}{target}}.x()\ =\ center.x;}
\DoxyCodeLine{00047\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_a762bcbc90d12dc1e2ee99eef39e87a1f}{light}}.\mbox{\hyperlink{classcrl_1_1gui_1_1_light_a493234ee537a7d72ca7f7af618a97050}{target}}.z()\ =\ center.z;}
\DoxyCodeLine{00048\ \ \ \ \ \}}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_ad14e31f0de214be1e77e4c7dfb88ac7e}{restart}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ setupRobotAndController();}
\DoxyCodeLine{00052\ \ \ \ \ \}}
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_ab1af1687305809b334126f1080ff6a4e}{drawObjectsWithShadows}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1gui_1_1_shader}{crl::gui::Shader}}\ \&shader)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ ShadowApplication::drawObjectsWithShadows(shader);}
\DoxyCodeLine{00056\ \ \ \ \ \}}
\DoxyCodeLine{00057\ }
\DoxyCodeLine{00058\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_a931a4a9292a7b8e53412eb75d0bba7fe}{drawShadowCastingObjects}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1gui_1_1_shader}{crl::gui::Shader}}\ \&shader)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00059\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>draw(shader);}
\DoxyCodeLine{00060\ \ \ \ \ \}}
\DoxyCodeLine{00061\ }
\DoxyCodeLine{00062\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_a39ccdd2c4a3a628761b3b9a5a3c7defc}{drawObjectsWithoutShadows}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{classcrl_1_1gui_1_1_shader}{crl::gui::Shader}}\ \&shader)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>draw(shader);}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{classloco_app_1_1_app_a23ac26991466f1aeb6984e0e68ca77e5}{drawDebugInfo}})}
\DoxyCodeLine{00066\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}-\/>drawDebugInfo(\&\mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_a8bc895b28d2435214fc05bc7c46b8210}{basicShader}});}
\DoxyCodeLine{00067\ \ \ \ \ \}}
\DoxyCodeLine{00068\ }
\DoxyCodeLine{00069\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classloco_app_1_1_app_add3c165fa5e47ce5d54dec82f69c8427}{keyPressed}}(\textcolor{keywordtype}{int}\ key,\ \textcolor{keywordtype}{int}\ mods)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00070\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key\ ==\ GLFW\_KEY\_SPACE)\ \{}
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcrl_1_1gui_1_1_application_addda3132f9a83ac4e341be4a811e401d}{processIsRunning}}\ =\ !\mbox{\hyperlink{classcrl_1_1gui_1_1_application_addda3132f9a83ac4e341be4a811e401d}{processIsRunning}};}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00073\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key\ ==\ GLFW\_KEY\_ENTER)\ \{}
\DoxyCodeLine{00074\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{classcrl_1_1gui_1_1_application_addda3132f9a83ac4e341be4a811e401d}{processIsRunning}})}
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_acaef1e67485408090a45419a58bd43c4}{process}}();}
\DoxyCodeLine{00076\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00077\ }
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ joystick\ command}}
\DoxyCodeLine{00079\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ dirty\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00080\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key\ ==\ GLFW\_KEY\_UP)\ \{}
\DoxyCodeLine{00081\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>speedForward\ +=\ 0.1;}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \ \ \ \ dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key\ ==\ GLFW\_KEY\_DOWN)\ \{}
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>speedForward\ -\/=\ 0.1;}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key\ ==\ GLFW\_KEY\_LEFT)\ \{}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>turningSpeed\ +=\ 0.1;}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00091\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (key\ ==\ GLFW\_KEY\_RIGHT)\ \{}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>turningSpeed\ -\/=\ 0.1;}
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ dirty\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ }
\DoxyCodeLine{00097\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (dirty)\ \{}
\DoxyCodeLine{00098\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>appendPeriodicGaitIfNeeded(\mbox{\hyperlink{classloco_app_1_1_app_a99ea5546181d653f20e9d03d93ee0e11}{gaitPlanner\_}}-\/>getPeriodicGait(\mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}));}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}-\/>generateMotionTrajectories();}
\DoxyCodeLine{00100\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00101\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00102\ }
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00104\ \ \ \ \ \}}
\DoxyCodeLine{00105\ }
\DoxyCodeLine{00106\ \ \ \ \ \textcolor{keyword}{template}\ <\textcolor{keyword}{typename}\ T>}
\DoxyCodeLine{00107\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_aaa3d5cc9b78a86c933e1f9a73be71d1a}{drawComboMenu}}(\textcolor{keyword}{const}\ std::string\ \&menuName,\ \textcolor{keyword}{const}\ std::vector<T>\ \&options,\ \mbox{\hyperlink{math_defs_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}\ \&selected)\ \{}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ImGui::BeginCombo(menuName.c\_str(),\ options[selected].name.c\_str()))\ \{}
\DoxyCodeLine{00109\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\mbox{\hyperlink{math_defs_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}\ n\ =\ 0;\ n\ <\ options.size();\ n++)\ \{}
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{bool}\ is\_selected\ =\ (selected\ ==\ n);}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ImGui::Selectable(options[n].name.c\_str(),\ is\_selected))\ \{}
\DoxyCodeLine{00112\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ selected\ =\ n;}
\DoxyCodeLine{00113\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ setupRobotAndController();}
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00115\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (is\_selected)\ \{}
\DoxyCodeLine{00116\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ImGui::SetItemDefaultFocus();}
\DoxyCodeLine{00117\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00118\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ \ \ \ \ ImGui::EndCombo();}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00121\ \ \ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_a3386593e1d681c0fd96491711ae6f4c5}{drawImGui}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcrl_1_1gui_1_1_shadow_application_ad9afb24a87e9c39268fb40c7c7787b3f}{crl::gui::ShadowApplication::drawImGui}}();}
\DoxyCodeLine{00125\ }
\DoxyCodeLine{00126\ \ \ \ \ \ \ \ \ ImGui::Begin(\textcolor{stringliteral}{"{}Main\ Menu"{}});}
\DoxyCodeLine{00127\ \ \ \ \ \ \ \ \ ImGui::Checkbox(\textcolor{stringliteral}{"{}Follow\ Robot\ with\ Camera"{}},\ \&\mbox{\hyperlink{classloco_app_1_1_app_a62b3d6c844211ac98fd8e5e8660d5d6c}{followRobotWithCamera}});}
\DoxyCodeLine{00128\ \ \ \ \ \ \ \ \ ImGui::Checkbox(\textcolor{stringliteral}{"{}Terrain"{}},\ \&\mbox{\hyperlink{classloco_app_1_1_app_a2a97f63ec0f24f7dbbfaca90b261a0f2}{uneven\_terrain}});}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ImGui::CollapsingHeader(\textcolor{stringliteral}{"{}Character"{}}))\ \{}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_aaa3d5cc9b78a86c933e1f9a73be71d1a}{drawComboMenu}}(\textcolor{stringliteral}{"{}Model\#\#character"{}},\ \mbox{\hyperlink{namespaceloco_app_a64a1b72492d03d45e1e5766719ae0582}{modelOptions}},\ \mbox{\hyperlink{classloco_app_1_1_app_afa0493aa90afeb8fab23f403369b783b}{selectedModel}});}
\DoxyCodeLine{00131\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00132\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ImGui::CollapsingHeader(\textcolor{stringliteral}{"{}Draw"{}}))\ \{}
\DoxyCodeLine{00133\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (ImGui::Checkbox(\textcolor{stringliteral}{"{}Show\ meshes"{}},\ \&\mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>showMeshes))\ \{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>showSkeleton\ =\ !\mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>showMeshes;}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00136\ \ \ \ \ \ \ \ \ \ \ \ \ ImGui::Checkbox(\textcolor{stringliteral}{"{}Show\ end\ effectors"{}},\ \&\mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>showEndEffectors);}
\DoxyCodeLine{00137\ \ \ \ \ \ \ \ \ \ \ \ \ ImGui::Checkbox(\textcolor{stringliteral}{"{}Draw\ debug\ info"{}},\ \&\mbox{\hyperlink{classloco_app_1_1_app_a23ac26991466f1aeb6984e0e68ca77e5}{drawDebugInfo}});}
\DoxyCodeLine{00138\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00139\ }
\DoxyCodeLine{00140\ \ \ \ \ \ \ \ \ ImGui::End();}
\DoxyCodeLine{00141\ }
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>visualizeContactSchedule();}
\DoxyCodeLine{00143\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>visualizeParameters();}
\DoxyCodeLine{00144\ \ \ \ \ \}}
\DoxyCodeLine{00145\ }
\DoxyCodeLine{00146\ \ \ \ \ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{classloco_app_1_1_app_a35f7d8a42e37732411c47c5ebb4017aa}{drawImPlot}}()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classcrl_1_1gui_1_1_application_a5b44e8eb01e87bd3f3310ae32bed76f4}{crl::gui::ShadowApplication::drawImPlot}}();}
\DoxyCodeLine{00148\ }
\DoxyCodeLine{00149\ \ \ \ \ \ \ \ \ ImGui::Begin(\textcolor{stringliteral}{"{}Plots"{}});}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ here,\ you\ can\ draw\ plots}}
\DoxyCodeLine{00151\ \ \ \ \ \ \ \ \ ImGui::End();}
\DoxyCodeLine{00152\ \ \ \ \ \}}
\DoxyCodeLine{00153\ }
\DoxyCodeLine{00154\ \ \ \ \ \textcolor{keyword}{virtual}\ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classloco_app_1_1_app_a59d7e139267febcfbf34c5839030a9b7}{drop}}(\textcolor{keywordtype}{int}\ count,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ **fileNames)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00156\ \ \ \ \ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00159\ \ \ \ \ \textcolor{keywordtype}{void}\ setupRobotAndController()\ \{}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keyword}{auto}\ \&m\ =\ \mbox{\hyperlink{namespaceloco_app_a64a1b72492d03d45e1e5766719ae0582}{modelOptions}}[\mbox{\hyperlink{classloco_app_1_1_app_afa0493aa90afeb8fab23f403369b783b}{selectedModel}}];}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *rbsFile\ =\ m.filePath.c\_str();}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}\ =\ std::make\_shared<crl::loco::LeggedRobot>(rbsFile);}
\DoxyCodeLine{00163\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>setRootState(\mbox{\hyperlink{classcrl_1_1_p3_d}{crl::P3D}}(0,\ m.baseTargetHeight,\ 0));}
\DoxyCodeLine{00164\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m.type\ ==\ \mbox{\hyperlink{structloco_app_1_1_model_option_aa5624710d82dcfd6311cce433aa7452aab0e603b215aa2da0e6c605301d79efe4}{ModelOption::Type::DOG}})\ \{}
\DoxyCodeLine{00165\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>showMeshes\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>showSkeleton\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_a99ea5546181d653f20e9d03d93ee0e11}{gaitPlanner\_}}\ =\ std::make\_shared<crl::loco::QuadrupedalGaitPlanner>();}
\DoxyCodeLine{00168\ \ \ \ \ \ \ \ \ \}\ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00169\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_a99ea5546181d653f20e9d03d93ee0e11}{gaitPlanner\_}}\ =\ std::make\_shared<crl::loco::BipedalGaitPlanner>();}
\DoxyCodeLine{00170\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00171\ }
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ add\ legs}}
\DoxyCodeLine{00173\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ m.legs.size();\ i++)\ \{}
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}-\/>addLimb(m.legs[i].first,\ m.legs[i].second);}
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ setup\ planner\ and\ controller}}
\DoxyCodeLine{00178\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}\ =\ std::make\_shared<crl::loco::SimpleLocomotionTrajectoryPlanner>(\mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}});}
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>trunkHeight\ =\ m.baseTargetHeight;}
\DoxyCodeLine{00180\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>targetStepHeight\ =\ m.swingFootHeight;}
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}\ =\ std::make\_shared<crl::loco::KinematicTrackingController>(\mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}});}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ generate\ plan}}
\DoxyCodeLine{00184\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}-\/>appendPeriodicGaitIfNeeded(\mbox{\hyperlink{classloco_app_1_1_app_a99ea5546181d653f20e9d03d93ee0e11}{gaitPlanner\_}}-\/>getPeriodicGait(\mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}));}
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}-\/>generateMotionTrajectories();}
\DoxyCodeLine{00186\ \ \ \ \ \}}
\DoxyCodeLine{00187\ }
\DoxyCodeLine{00188\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00189\ \ \ \ \ \textcolor{comment}{//\ simulation}}
\DoxyCodeLine{00190\ \ \ \ \ std::shared\_ptr<crl::loco::LeggedRobot>\ \mbox{\hyperlink{classloco_app_1_1_app_accd18ee729c764b465c445e19f3377d1}{robot\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00191\ \ \ \ \ std::shared\_ptr<crl::loco::GaitPlanner>\ \mbox{\hyperlink{classloco_app_1_1_app_a99ea5546181d653f20e9d03d93ee0e11}{gaitPlanner\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00192\ \ \ \ \ std::shared\_ptr<crl::loco::LocomotionTrajectoryPlanner>\ \mbox{\hyperlink{classloco_app_1_1_app_af13cf58d2806623327cf407c05d07e11}{planner\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00193\ \ \ \ \ std::shared\_ptr<crl::loco::KinematicTrackingController>\ \mbox{\hyperlink{classloco_app_1_1_app_ac6bb7e97199f89abaa93397dd3852227}{controller\_}}\ =\ \textcolor{keyword}{nullptr};}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \textcolor{comment}{//\ parameters}}
\DoxyCodeLine{00196\ \ \ \ \ \textcolor{keywordtype}{double}\ \mbox{\hyperlink{classloco_app_1_1_app_af8ac06039b98b1c2f2d555f5d5592b6d}{dt}}\ =\ 1\ /\ 60.0;}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \ \ \ \ \textcolor{comment}{//\ options}}
\DoxyCodeLine{00199\ \ \ \ \ \mbox{\hyperlink{math_defs_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}\ \mbox{\hyperlink{classloco_app_1_1_app_afa0493aa90afeb8fab23f403369b783b}{selectedModel}}\ =\ 0;}
\DoxyCodeLine{00200\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classloco_app_1_1_app_a62b3d6c844211ac98fd8e5e8660d5d6c}{followRobotWithCamera}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00201\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classloco_app_1_1_app_a2a97f63ec0f24f7dbbfaca90b261a0f2}{uneven\_terrain}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00202\ \ \ \ \ \textcolor{keywordtype}{bool}\ \mbox{\hyperlink{classloco_app_1_1_app_a23ac26991466f1aeb6984e0e68ca77e5}{drawDebugInfo}}\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00203\ \};}
\DoxyCodeLine{00204\ }
\DoxyCodeLine{00205\ \}\ \ \textcolor{comment}{//\ namespace\ locoApp}}

\end{DoxyCode}
